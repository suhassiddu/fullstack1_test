(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),o=a.n(i),c=a(35),l=a(13),u=a(69),s=a(78),p=a(17),d=a(20),m=a(114),f=a(152),h=a(153),_=a(115),g=a(163),E=a(151),b=a(70),O=a.n(b),v=window.location,y=v.hostname,j=v.protocol,w=v.port,k="".concat(j,"//").concat(y,":").concat(w,"/"),A=O.a.create({baseURL:k}),R=function(){return function(e){localStorage.removeItem("Auth"),e({type:"AUTH"})}},F=function(e){var t=e.area_code,a=e.store_name,n=e.product_name,r=e.product_detail,i=e.product_image,o=e.offer_detail,c=e.start_date,l=e.end_date;return function(e,u){var s={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(u().Auth.token)}},p=new FormData;p.append("area_code",t),p.append("store_name",a),p.append("product_name",n),p.append("product_detail",r),p.append("product_image",i),p.append("offer_detail",o),p.append("start_date",c),p.append("end_date",l),A.post("api/offers",p,s).then(function(t){console.log(t.data),e({type:"ADD_OFFER",payload:t.data})}).catch(function(t){console.log(t),e(R())})}},N=function(e){var t=e.id,a=e.area_code,n=e.store_name,r=e.product_name,i=e.product_detail,o=e.product_image,c=e.offer_detail,l=e.start_date,u=e.end_date;return function(e,s){var p={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(s().Auth.token)}},d=new FormData;d.append("area_code",a),d.append("store_name",n),d.append("product_name",r),d.append("product_detail",i),d.append("product_image",o),d.append("offer_detail",c),d.append("start_date",l),d.append("end_date",u),A.put("api/offers/".concat(t),d,p).then(function(t){console.log(t.data),e({type:"UPDATE_OFFER",payload:t.data})}).catch(function(t){console.log(t),e(R())})}},P=function(e){return function(t,a){var n={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(a().Auth.token)}};A.delete("api/offers/".concat(e),n).then(function(e){console.log(e.data),t({type:"REMOVE_OFFER",id:e.data.id})}).catch(function(e){console.log(e),t(R())})}},T=function(){return function(e,t){var a={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t().Auth.token)}};A.get("api/offers",a).then(function(t){console.log(t.data),e({type:"OFFERS",payload:t.data})}).catch(function(t){console.log(t),e(R())})}},x=function(e,t,a){var n=e.email,r=e.password;return function(e){A.post("login",{email:n,password:r}).then(function(a){var n={isAuthenticated:!0,token:a.data.token};console.log(n),localStorage.setItem("Auth",JSON.stringify(n)),e({type:"AUTH",payload:Object.assign({},n)}),t.push("/")}).catch(function(t){var n={isAuthenticated:!1,token:""};a.setState(function(e){return{ErrMsg:t.message}}),localStorage.setItem("Auth",JSON.stringify(n)),e({type:"AUTH",payload:Object.assign({},n)})})}},C=Object(m.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}),D=Object(l.b)(function(e){return{isAuthenticated:e.Auth.isAuthenticated}},function(e){return{onLogout:function(){e(R())}}})(function(e){var t=C();return r.a.createElement("div",{className:t.root},r.a.createElement(E.a,null),r.a.createElement(f.a,{position:"sticky",color:"default",className:t.appBar},r.a.createElement(h.a,null,r.a.createElement(_.a,{variant:"h6",color:"inherit",className:t.title},r.a.createElement(d.b,{to:"/"},r.a.createElement(g.a,{color:"inherit"},"Home"))),r.a.createElement(d.b,{to:"/upload"},r.a.createElement(g.a,{color:"inherit"},"Upload")),r.a.createElement(g.a,{color:"inherit",onClick:e.onLogout},"Logout"))))}),U=a(21),M=a(22),L=a(24),S=a(23),B=a(31),W=a(25),V=a(79),I=a(154),q=a(162),z=a(41),H=Object(m.a)(function(e){return{appBar:{position:"relative"},layout:Object(z.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),paper:Object(z.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}}),J=function(e){function t(e){var a;return Object(U.a)(this,t),(a=Object(L.a)(this,Object(S.a)(t).call(this,e))).handle_submit=a.handle_submit.bind(Object(B.a)(a)),a.area_code_input=r.a.createRef(),a.store_name_input=r.a.createRef(),a.product_name_input=r.a.createRef(),a.product_detail_input=r.a.createRef(),a.product_image_input=r.a.createRef(),a.offer_detail_input=r.a.createRef(),a.startdate_input=r.a.createRef(),a.enddate_input=r.a.createRef(),a}return Object(W.a)(t,e),Object(M.a)(t,[{key:"handle_submit",value:function(){var e=this.product_name_input.current.value.trim(),t=this.product_detail_input.current.value.trim(),a=this.product_image_input.current.files[0],n=this.startdate_input.current.value.trim();this.props.onUpload({area_code:"",store_name:"",product_name:e,product_detail:t,product_image:a,offer_detail:"",start_date:n,end_date:""})}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement("main",{className:e.layout},r.a.createElement(V.a,{className:e.paper},r.a.createElement(_.a,{component:"h1",variant:"h4",align:"center"},"New Post"),r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{container:!0,spacing:3},r.a.createElement(I.a,{item:!0,xs:12},r.a.createElement(q.a,{required:!0,name:"Title",label:"Title",inputProps:{ref:this.product_name_input},fullWidth:!0})),r.a.createElement(I.a,{item:!0,xs:12,style:{display:"none"}},r.a.createElement("label",{for:"product_photo"},"Photo "),r.a.createElement("input",{id:"product_photo",ref:this.product_image_input,type:"file"})),r.a.createElement(I.a,{item:!0,xs:12},r.a.createElement(q.a,{multiline:!0,rows:5,rowsMax:5,required:!0,name:"Post",label:"Post",inputProps:{ref:this.product_detail_input},fullWidth:!0})),r.a.createElement(I.a,{item:!0,xs:12,sm:6},r.a.createElement(q.a,{required:!0,fullWidth:!0,id:"date",label:"Date",type:"date",defaultValue:"2017-05-24",inputProps:{ref:this.startdate_input},InputLabelProps:{shrink:!0}}))),r.a.createElement("div",{className:e.buttons},r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:this.handle_submit,className:e.button},"Upload"))))))}}]),t}(n.Component);J=Object(l.b)(null,function(e){return{onUpload:function(t){e(F(t))}}})(J);var G=function(e){var t=H();return r.a.createElement(J,{classes:t})},X=a(48),$=a(77),K=a.n($),Q=a(158),Y=a(160),Z=a(156),ee=a(159),te=a(155),ae=a(157),ne=function(e){function t(e){var a;return Object(U.a)(this,t),(a=Object(L.a)(this,Object(S.a)(t).call(this,e))).handle_submit=a.handle_submit.bind(Object(B.a)(a)),a.area_code_input=r.a.createRef(),a.store_name_input=r.a.createRef(),a.product_name_input=r.a.createRef(),a.product_detail_input=r.a.createRef(),a.product_image_input=r.a.createRef(),a.offer_detail_input=r.a.createRef(),a.start_date_input=r.a.createRef(),a.end_date_input=r.a.createRef(),a}return Object(W.a)(t,e),Object(M.a)(t,[{key:"handle_submit",value:function(){var e=this.product_name_input.current.value.trim(),t=this.product_detail_input.current.value.trim(),a=this.product_image_input.current.files[0],n=this.start_date_input.current.value.trim();this.props.onUpdate({id:this.props.id,area_code:"",store_name:"",product_name:e,product_detail:t,product_image:a,offer_detail:"",start_date:n,end_date:""})}},{key:"render",value:function(){var e=this;return r.a.createElement(te.a,{key:this.props.id},r.a.createElement(Z.a,{align:"right"},r.a.createElement(I.a,{container:!0,spacing:3},r.a.createElement(I.a,{item:!0},r.a.createElement(g.a,{variant:"contained",component:d.b,to:"/view/"+this.props.id,color:"primary"},"Open")))),r.a.createElement(Z.a,{component:"th",scope:"row"},r.a.createElement(q.a,{fullWidth:!0,inputProps:{ref:this.product_name_input},defaultValue:this.props.Offer.product_name})),r.a.createElement(Z.a,{align:"right",style:{display:"none"}},r.a.createElement("img",{width:"150",alt:"",src:k+this.props.Offer.image_path}),r.a.createElement("input",{ref:this.product_image_input,type:"file"})),r.a.createElement(Z.a,{align:"right"},r.a.createElement(q.a,{placeholder:"To write post",multiline:!0,rows:5,rowsMax:5,fullWidth:!0,inputProps:{ref:this.product_detail_input},defaultValue:this.props.Offer.product_detail})),r.a.createElement(Z.a,{align:"right"},r.a.createElement(q.a,{fullWidth:!0,inputProps:{ref:this.start_date_input},type:"date",defaultValue:this.props.Offer.start_date})),r.a.createElement(Z.a,{align:"right"},r.a.createElement(I.a,{container:!0,spacing:3},r.a.createElement(I.a,{item:!0},r.a.createElement(g.a,{variant:"contained",color:"secondary",onClick:function(){return e.props.onDelete(e.props.id)}},"Remove")),r.a.createElement(I.a,{item:!0},r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:this.handle_submit},"Update")))))}}]),t}(n.Component),re=Object(l.b)(function(e,t){return{Offer:e.Offers.find(function(e){return e.id===t.id})}},function(e){return{onDelete:function(t){e(P(t))},onUpdate:function(t){e(N(t))}}})(ne),ie=Object(m.a)(function(e){return{root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto"},table:{minWidth:650}}}),oe=function(e){function t(e){var a;return Object(U.a)(this,t),(a=Object(L.a)(this,Object(S.a)(t).call(this,e))).state={search_text:""},a.search_input=r.a.createRef(),a}return Object(W.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){this.props.onOffers()}},{key:"render",value:function(){var e=parseInt(this.props.match.params.id||"0"),t=Math.ceil(this.props.Offers.length/3),a=K.a.chunk(this.props.Offers,3)[e]||[],n=this.props.classes;return r.a.createElement("div",null,r.a.createElement(D,null),r.a.createElement(V.a,{className:n.root},r.a.createElement("br",null),r.a.createElement(I.a,{container:!0,spacing:3},r.a.createElement(I.a,{item:!0,xs:3}),r.a.createElement(I.a,{item:!0,xs:3},r.a.createElement(ae.a,{variant:"contained",color:"primary",size:"large","aria-label":"large contained primary button group"},Object(X.a)(Array(t).keys()).map(function(e){return r.a.createElement(g.a,{component:d.b,to:"/"+e},e)})))),r.a.createElement(Q.a,{className:n.table},r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement(Z.a,null,"View"),r.a.createElement(Z.a,null,"Title"),r.a.createElement(Z.a,{align:"right"},"Post"),r.a.createElement(Z.a,{align:"right"},"Date"),r.a.createElement(Z.a,{aligh:"right"},"Update"))),r.a.createElement(Y.a,null,a.map(function(e){return r.a.createElement(re,{id:e.id})})))))}}]),t}(n.Component);oe=Object(p.g)(oe),oe=Object(l.b)(function(e){return{Offers:e.Offers}},function(e){return{onOffers:function(){e(T())}}})(oe);var ce=function(e){var t=ie();return r.a.createElement(oe,{classes:t})},le=a(161),ue=function(e){function t(e){var a;return Object(U.a)(this,t),(a=Object(L.a)(this,Object(S.a)(t).call(this,e))).state={ErrMsg:""},a.email_input=r.a.createRef(),a.password_input=r.a.createRef(),a.handle_submit=a.handle_submit.bind(Object(B.a)(a)),a}return Object(W.a)(t,e),Object(M.a)(t,[{key:"handle_submit",value:function(){var e=this.email_input.current.value.trim(),t=this.password_input.current.value.trim();e&&t?(this.setState({ErrMsg:""}),this.props.onLogin({email:e,password:t},this.props.history,this)):this.setState({ErrMsg:"Please provide all the parameters"})}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:e.layout},r.a.createElement(V.a,{className:e.paper},r.a.createElement(_.a,{component:"h1",variant:"h4",align:"center"},"Login"),r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{container:!0,spacing:3},this.state.ErrMsg?r.a.createElement(I.a,{item:!0,xs:12},r.a.createElement(le.a,{color:"inherit",className:e.margin,message:this.state.ErrMsg})):r.a.createElement("div",null),r.a.createElement(I.a,{item:!0,xs:12},r.a.createElement(q.a,{required:!0,type:"email",name:"email",label:"Email",defaultValue:"visitor@abc.com",inputProps:{ref:this.email_input},fullWidth:!0})),r.a.createElement(I.a,{item:!0,xs:12},r.a.createElement(q.a,{required:!0,type:"password",name:"password",label:"Password",defaultValue:"123",inputProps:{ref:this.password_input},fullWidth:!0}))),r.a.createElement("div",{className:e.buttons},r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:this.handle_submit,className:e.button},"Login"))))))}}]),t}(n.Component);ue=Object(p.g)(Object(l.b)(null,function(e){return{onLogin:function(t,a,n){e(x(t,a,n))}}})(ue));var se=function(e){var t=H();return r.a.createElement(ue,{classes:t})},pe=function(e){function t(e){return Object(U.a)(this,t),Object(L.a)(this,Object(S.a)(t).call(this,e))}return Object(W.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){this.props.onOffers()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,this.props.Offer.product_name),r.a.createElement("p",null,"Date: ",this.props.Offer.start_date),r.a.createElement("p",null,this.props.Offer.product_detail))}}]),t}(n.Component);pe=Object(p.g)(pe);var de=Object(l.b)(function(e,t){return{Offer:e.Offers.find(function(e){return e.id===parseInt(t.match.params.id||"0")})}},function(e){return{onOffers:function(){e(T())}}})(pe),me=function(e){var t=e.component,a=e.isAuthenticated,n=Object(s.a)(e,["component","isAuthenticated"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};me=Object(l.b)(function(e){return{isAuthenticated:e.Auth.isAuthenticated}},null)(me);var fe=function(){return r.a.createElement(d.a,null,r.a.createElement(p.d,null,r.a.createElement(me,{path:"/upload",component:G}),r.a.createElement(p.b,{path:"/login",component:se}),r.a.createElement(me,{path:"/view/:id?",component:de}),r.a.createElement(me,{path:"/:id?",component:ce})))},he=a(56);var _e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OFFERS":return t.payload;case"REMOVE_OFFER":return e.filter(function(e){return e.id!==t.id});case"ADD_OFFER":return[].concat(Object(X.a)(e),[Object(he.a)({},t.payload)]);case"UPDATE_OFFER":return e.map(function(e){return e.id===t.payload.id?Object(he.a)({},e,t.payload):e});default:return e}},ge={isAuthenticated:!1,token:""};var Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH":return void 0===t.payload?ge:t.payload;default:return e}},be=Object(c.c)({Offers:_e,Auth:Ee});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Oe=Object(c.d)(be,function(){try{var e=localStorage.getItem("Auth");if(null===e)return;return{Auth:e=JSON.parse(e)}}catch(t){return}}(),Object(c.a)(u.a));o.a.render(r.a.createElement(l.a,{store:Oe},r.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},85:function(e,t,a){e.exports=a(113)}},[[85,1,2]]]);
//# sourceMappingURL=main.3eef5292.chunk.js.map